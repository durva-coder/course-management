<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <!-- <link rel="stylesheet" href="/assets/styles.css" type="text/css" /> -->
    <title>Update Course</title>

    <style>
      body {
                color: #566787;
                background: #f5f5f5;
                font-family: 'Varela Round', sans-serif;
                font-size: 13px;
            }
            h1{
                padding-bottom: 15px;
                background: #435d7d;
                color: #fff;
                padding: 16px 30px;
                min-width: 100%;
                margin: -20px -25px 10px;
                border-radius: 3px 3px 0 0;
      }
    </style>

</head>
<body>

    <nav class="navbar navbar-inverse">
        <div class="container-fluid">
          <div class="navbar-header">
            <a class="navbar-brand" href="viewAllCourses">Course Management</a>
          </div>
          <ul class="nav navbar-nav">
            <li><a href="/viewAllCourses">All Courses</a></li>
            <li><a href="/viewAddCourse">Add Courses</a></li>
          </ul>
        </div>
    </nav>

    <h1>Update Course page</h1>
    <br><br><br>
    <div class="container">
        <form class="form-update-id" data-id="<%= courses.id %>">

          <div class="form-group">
            <label for="usr">Course Name:</label>
            <input name="courseName" type="text" class="form-control" id="name" value="<%= courses.name %>" required>
          </div>

          <div class="form-group">
            <label for="usr">Course Duration:</label>
            <input name="courseDuration" type="text" class="form-control" id="duration" value="<%= courses.duration %>" required>
          </div>
          
          <div class="form-group">
            <label for="usr">Course Fees:</label>
            <input name="courseFees" type="text" class="form-control" id="fees" value="<%= courses.fees %>" required>
          </div>

          <button type="button1" id="button1" class="button1">Update Course</button>

        </form>
    </div>
    <script type="text/javascript" src="assets/courseslist.js"></script>
    <script type="text/javascript" src="/addCourses.ejs"></script>
    <script type="text/javascript" src="/course.ejs"></script>

    <script>

      // updating one course
      $('#button1').on('click', function(){
        // alert('fgdf')
        let id = $('form').data('id');
        var name = $('#name').val();
        var duration = $('#duration').val();
        var fees = $('#fees').val();
        // alert(id)
        $.ajax({
          type: 'PUT',
          url: '/update/' + id,
          data: {name: name, duration: duration, fees: fees},
          success: function(data){
            alert('course updated');
            //do something with the data via front-end framework
            location.reload();
          }
        });
  
        return false;
  
    });
    </script>
</body>
</html>
